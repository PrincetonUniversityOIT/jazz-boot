{"version":3,"file":"carousel.js","sources":["../src/carousel.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): carousel.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  defineJQueryPlugin,\n  getElementFromSelector,\n  getNextActiveElement,\n  isRTL,\n  isVisible,\n  reflow,\n  triggerTransitionEnd\n} from './util/index'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport Swipe from './util/swipe'\nimport BaseComponent from './base-component'\n\n/**\n * Constants\n */\n\nconst NAME = 'carousel'\nconst DATA_KEY = 'bs.carousel'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst ARROW_LEFT_KEY = 'ArrowLeft'\nconst ARROW_RIGHT_KEY = 'ArrowRight'\nconst TOUCHEVENT_COMPAT_WAIT = 500 // Time for mouse compat events to fire after touch\n\nconst ORDER_NEXT = 'next'\nconst ORDER_PREV = 'prev'\nconst DIRECTION_LEFT = 'left'\nconst DIRECTION_RIGHT = 'right'\n\nconst EVENT_SLIDE = `slide${EVENT_KEY}`\nconst EVENT_SLID = `slid${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_MOUSEENTER = `mouseenter${EVENT_KEY}`\nconst EVENT_MOUSELEAVE = `mouseleave${EVENT_KEY}`\nconst EVENT_DRAG_START = `dragstart${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_CAROUSEL = 'carousel'\nconst CLASS_NAME_ACTIVE = 'active'\nconst CLASS_NAME_SLIDE = 'slide'\nconst CLASS_NAME_END = 'carousel-item-end'\nconst CLASS_NAME_START = 'carousel-item-start'\nconst CLASS_NAME_NEXT = 'carousel-item-next'\nconst CLASS_NAME_PREV = 'carousel-item-prev'\n\nconst SELECTOR_ACTIVE = '.active'\nconst SELECTOR_ITEM = '.carousel-item'\nconst SELECTOR_ACTIVE_ITEM = SELECTOR_ACTIVE + SELECTOR_ITEM\nconst SELECTOR_ITEM_IMG = '.carousel-item img'\nconst SELECTOR_NEXT_PREV = '.carousel-item-next, .carousel-item-prev'\nconst SELECTOR_INDICATORS = '.carousel-indicators'\nconst SELECTOR_DATA_SLIDE = '[data-bs-slide], [data-bs-slide-to]'\nconst SELECTOR_DATA_RIDE = '[data-bs-ride=\"carousel\"]'\n\nconst KEY_TO_DIRECTION = {\n  [ARROW_LEFT_KEY]: DIRECTION_RIGHT,\n  [ARROW_RIGHT_KEY]: DIRECTION_LEFT\n}\n\nconst Default = {\n  interval: 5000,\n  keyboard: true,\n  slide: false,\n  pause: 'hover',\n  wrap: true,\n  touch: true\n}\n\nconst DefaultType = {\n  interval: '(number|boolean)',\n  keyboard: 'boolean',\n  slide: '(boolean|string)',\n  pause: '(string|boolean)',\n  wrap: 'boolean',\n  touch: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Carousel extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._interval = null\n    this._activeElement = null\n    this._isPaused = false\n    this._isSliding = false\n    this.touchTimeout = null\n    this._swipeHelper = null\n\n    this._indicatorsElement = SelectorEngine.findOne(SELECTOR_INDICATORS, this._element)\n    this._addEventListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  next() {\n    this._slide(ORDER_NEXT)\n  }\n\n  nextWhenVisible() {\n    // FIXME TODO use `document.visibilityState`\n    // Don't call next when the page isn't visible\n    // or the carousel or its parent isn't visible\n    if (!document.hidden && isVisible(this._element)) {\n      this.next()\n    }\n  }\n\n  prev() {\n    this._slide(ORDER_PREV)\n  }\n\n  pause(event) {\n    if (!event) {\n      this._isPaused = true\n    }\n\n    if (SelectorEngine.findOne(SELECTOR_NEXT_PREV, this._element)) {\n      triggerTransitionEnd(this._element)\n      this.cycle(true)\n    }\n\n    this._clearInterval()\n  }\n\n  cycle(event) {\n    if (!event) {\n      this._isPaused = false\n    }\n\n    this._clearInterval()\n    if (this._config.interval && !this._isPaused) {\n      this._updateInterval()\n\n      this._interval = setInterval(() => this.nextWhenVisible(), this._config.interval)\n    }\n  }\n\n  to(index) {\n    const items = this._getItems()\n    if (index > items.length - 1 || index < 0) {\n      return\n    }\n\n    if (this._isSliding) {\n      EventHandler.one(this._element, EVENT_SLID, () => this.to(index))\n      return\n    }\n\n    const activeIndex = this._getItemIndex(this._getActive())\n    if (activeIndex === index) {\n      this.pause()\n      this.cycle()\n      return\n    }\n\n    const order = index > activeIndex ? ORDER_NEXT : ORDER_PREV\n\n    this._slide(order, items[index])\n  }\n\n  dispose() {\n    if (this._swipeHelper) {\n      this._swipeHelper.dispose()\n    }\n\n    super.dispose()\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    config.defaultInterval = config.interval\n    return config\n  }\n\n  _addEventListeners() {\n    if (this._config.keyboard) {\n      EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event))\n    }\n\n    if (this._config.pause === 'hover') {\n      EventHandler.on(this._element, EVENT_MOUSEENTER, event => this.pause(event))\n      EventHandler.on(this._element, EVENT_MOUSELEAVE, event => this.cycle(event))\n    }\n\n    if (this._config.touch && Swipe.isSupported()) {\n      this._addTouchEventListeners()\n    }\n  }\n\n  _addTouchEventListeners() {\n    for (const img of SelectorEngine.find(SELECTOR_ITEM_IMG, this._element)) {\n      EventHandler.on(img, EVENT_DRAG_START, event => event.preventDefault())\n    }\n\n    const endCallBack = () => {\n      if (this._config.pause !== 'hover') {\n        return\n      }\n\n      // If it's a touch-enabled device, mouseenter/leave are fired as\n      // part of the mouse compatibility events on first tap - the carousel\n      // would stop cycling until user tapped out of it;\n      // here, we listen for touchend, explicitly pause the carousel\n      // (as if it's the second time we tap on it, mouseenter compat event\n      // is NOT fired) and after a timeout (to allow for mouse compatibility\n      // events to fire) we explicitly restart cycling\n\n      this.pause()\n      if (this.touchTimeout) {\n        clearTimeout(this.touchTimeout)\n      }\n\n      this.touchTimeout = setTimeout(event => this.cycle(event), TOUCHEVENT_COMPAT_WAIT + this._config.interval)\n    }\n\n    const swipeConfig = {\n      leftCallback: () => this._slide(this._directionToOrder(DIRECTION_LEFT)),\n      rightCallback: () => this._slide(this._directionToOrder(DIRECTION_RIGHT)),\n      endCallback: endCallBack\n    }\n\n    this._swipeHelper = new Swipe(this._element, swipeConfig)\n  }\n\n  _keydown(event) {\n    if (/input|textarea/i.test(event.target.tagName)) {\n      return\n    }\n\n    const direction = KEY_TO_DIRECTION[event.key]\n    if (direction) {\n      event.preventDefault()\n      this._slide(this._directionToOrder(direction))\n    }\n  }\n\n  _getItemIndex(element) {\n    return this._getItems().indexOf(element)\n  }\n\n  _setActiveIndicatorElement(index) {\n    if (!this._indicatorsElement) {\n      return\n    }\n\n    const activeIndicator = SelectorEngine.findOne(SELECTOR_ACTIVE, this._indicatorsElement)\n\n    activeIndicator.classList.remove(CLASS_NAME_ACTIVE)\n    activeIndicator.removeAttribute('aria-current')\n\n    const newActiveIndicator = SelectorEngine.findOne(`[data-bs-slide-to=\"${index}\"]`, this._indicatorsElement)\n\n    if (newActiveIndicator) {\n      newActiveIndicator.classList.add(CLASS_NAME_ACTIVE)\n      newActiveIndicator.setAttribute('aria-current', 'true')\n    }\n  }\n\n  _updateInterval() {\n    const element = this._activeElement || this._getActive()\n\n    if (!element) {\n      return\n    }\n\n    const elementInterval = Number.parseInt(element.getAttribute('data-bs-interval'), 10)\n\n    this._config.interval = elementInterval || this._config.defaultInterval\n  }\n\n  _slide(order, element = null) {\n    if (this._isSliding) {\n      return\n    }\n\n    const activeElement = this._getActive()\n    const isNext = order === ORDER_NEXT\n    const nextElement = element || getNextActiveElement(this._getItems(), activeElement, isNext, this._config.wrap)\n\n    if (nextElement === activeElement) {\n      return\n    }\n\n    const nextElementIndex = this._getItemIndex(nextElement)\n\n    const triggerEvent = eventName => {\n      return EventHandler.trigger(this._element, eventName, {\n        relatedTarget: nextElement,\n        direction: this._orderToDirection(order),\n        from: this._getItemIndex(activeElement),\n        to: nextElementIndex\n      })\n    }\n\n    const slideEvent = triggerEvent(EVENT_SLIDE)\n\n    if (slideEvent.defaultPrevented) {\n      return\n    }\n\n    if (!activeElement || !nextElement) {\n      // Some weirdness is happening, so we bail\n      return\n    }\n\n    this._isSliding = true\n\n    const isCycling = Boolean(this._interval)\n    if (isCycling) {\n      this.pause()\n    }\n\n    this._setActiveIndicatorElement(nextElementIndex)\n    this._activeElement = nextElement\n\n    const directionalClassName = isNext ? CLASS_NAME_START : CLASS_NAME_END\n    const orderClassName = isNext ? CLASS_NAME_NEXT : CLASS_NAME_PREV\n\n    nextElement.classList.add(orderClassName)\n\n    reflow(nextElement)\n\n    activeElement.classList.add(directionalClassName)\n    nextElement.classList.add(directionalClassName)\n\n    const completeCallBack = () => {\n      nextElement.classList.remove(directionalClassName, orderClassName)\n      nextElement.classList.add(CLASS_NAME_ACTIVE)\n\n      activeElement.classList.remove(CLASS_NAME_ACTIVE, orderClassName, directionalClassName)\n\n      this._isSliding = false\n\n      triggerEvent(EVENT_SLID)\n    }\n\n    this._queueCallback(completeCallBack, activeElement, this._isAnimated())\n\n    if (isCycling) {\n      this.cycle()\n    }\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_SLIDE)\n  }\n\n  _getActive() {\n    return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM, this._element)\n  }\n\n  _getItems() {\n    return SelectorEngine.find(SELECTOR_ITEM, this._element)\n  }\n\n  _clearInterval() {\n    if (this._interval) {\n      clearInterval(this._interval)\n      this._interval = null\n    }\n  }\n\n  _directionToOrder(direction) {\n    if (![DIRECTION_RIGHT, DIRECTION_LEFT].includes(direction)) {\n      return direction\n    }\n\n    if (isRTL()) {\n      return direction === DIRECTION_LEFT ? ORDER_PREV : ORDER_NEXT\n    }\n\n    return direction === DIRECTION_LEFT ? ORDER_NEXT : ORDER_PREV\n  }\n\n  _orderToDirection(order) {\n    if (![ORDER_NEXT, ORDER_PREV].includes(order)) {\n      return order\n    }\n\n    if (isRTL()) {\n      return order === ORDER_PREV ? DIRECTION_LEFT : DIRECTION_RIGHT\n    }\n\n    return order === ORDER_PREV ? DIRECTION_RIGHT : DIRECTION_LEFT\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Carousel.getOrCreateInstance(this, config)\n\n      let { _config } = data\n      if (typeof config === 'object') {\n        _config = {\n          ..._config,\n          ...config\n        }\n      }\n\n      if (typeof config === 'number') {\n        data.to(config)\n        return\n      }\n\n      if (typeof config === 'string') {\n        if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n        return\n      }\n\n      if (_config.interval && _config.ride) {\n        data.pause()\n        data.cycle()\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_SLIDE, function (event) {\n  const target = getElementFromSelector(this)\n\n  if (!target || !target.classList.contains(CLASS_NAME_CAROUSEL)) {\n    return\n  }\n\n  event.preventDefault()\n\n  const carousel = Carousel.getOrCreateInstance(target)\n  const slideIndex = this.getAttribute('data-bs-slide-to')\n\n  if (slideIndex) {\n    carousel.to(slideIndex)\n    return\n  }\n\n  if (Manipulator.getDataAttribute(this, 'slide') === 'next') {\n    carousel.next()\n    return\n  }\n\n  carousel.prev()\n})\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  const carousels = SelectorEngine.find(SELECTOR_DATA_RIDE)\n\n  for (const carousel of carousels) {\n    Carousel.getOrCreateInstance(carousel)\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Carousel)\n\nexport default Carousel\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","ARROW_LEFT_KEY","ARROW_RIGHT_KEY","TOUCHEVENT_COMPAT_WAIT","ORDER_NEXT","ORDER_PREV","DIRECTION_LEFT","DIRECTION_RIGHT","EVENT_SLIDE","EVENT_SLID","EVENT_KEYDOWN","EVENT_MOUSEENTER","EVENT_MOUSELEAVE","EVENT_DRAG_START","EVENT_LOAD_DATA_API","EVENT_CLICK_DATA_API","CLASS_NAME_CAROUSEL","CLASS_NAME_ACTIVE","CLASS_NAME_SLIDE","CLASS_NAME_END","CLASS_NAME_START","CLASS_NAME_NEXT","CLASS_NAME_PREV","SELECTOR_ACTIVE","SELECTOR_ITEM","SELECTOR_ACTIVE_ITEM","SELECTOR_ITEM_IMG","SELECTOR_NEXT_PREV","SELECTOR_INDICATORS","SELECTOR_DATA_SLIDE","SELECTOR_DATA_RIDE","KEY_TO_DIRECTION","Default","interval","keyboard","slide","pause","wrap","touch","DefaultType","Carousel","BaseComponent","constructor","element","config","_interval","_activeElement","_isPaused","_isSliding","touchTimeout","_swipeHelper","_indicatorsElement","SelectorEngine","findOne","_element","_addEventListeners","next","_slide","nextWhenVisible","document","hidden","isVisible","prev","event","triggerTransitionEnd","cycle","_clearInterval","_config","_updateInterval","setInterval","to","index","items","_getItems","length","EventHandler","one","activeIndex","_getItemIndex","_getActive","order","dispose","_configAfterMerge","defaultInterval","on","_keydown","Swipe","isSupported","_addTouchEventListeners","img","find","preventDefault","endCallBack","clearTimeout","setTimeout","swipeConfig","leftCallback","_directionToOrder","rightCallback","endCallback","test","target","tagName","direction","key","indexOf","_setActiveIndicatorElement","activeIndicator","classList","remove","removeAttribute","newActiveIndicator","add","setAttribute","elementInterval","Number","parseInt","getAttribute","activeElement","isNext","nextElement","getNextActiveElement","nextElementIndex","triggerEvent","eventName","trigger","relatedTarget","_orderToDirection","from","slideEvent","defaultPrevented","isCycling","Boolean","directionalClassName","orderClassName","reflow","completeCallBack","_queueCallback","_isAnimated","contains","clearInterval","includes","isRTL","jQueryInterface","each","data","getOrCreateInstance","undefined","startsWith","TypeError","ride","getElementFromSelector","carousel","slideIndex","Manipulator","getDataAttribute","window","carousels","defineJQueryPlugin"],"mappings":"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"}