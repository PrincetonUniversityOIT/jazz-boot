{"version":3,"file":"scrollspy.js","sources":["../src/scrollspy.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): scrollspy.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin, getElement, getSelectorFromElement } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * Constants\n */\n\nconst NAME = 'scrollspy'\nconst DATA_KEY = 'bs.scrollspy'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst EVENT_ACTIVATE = `activate${EVENT_KEY}`\nconst EVENT_SCROLL = `scroll${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_DROPDOWN_ITEM = 'dropdown-item'\nconst CLASS_NAME_ACTIVE = 'active'\n\nconst SELECTOR_DATA_SPY = '[data-bs-spy=\"scroll\"]'\nconst SELECTOR_NAV_LIST_GROUP = '.nav, .list-group'\nconst SELECTOR_NAV_LINKS = '.nav-link'\nconst SELECTOR_NAV_ITEMS = '.nav-item'\nconst SELECTOR_LIST_ITEMS = '.list-group-item'\nconst SELECTOR_LINK_ITEMS = `${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}, .${CLASS_NAME_DROPDOWN_ITEM}`\nconst SELECTOR_DROPDOWN = '.dropdown'\nconst SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle'\n\nconst METHOD_OFFSET = 'offset'\nconst METHOD_POSITION = 'position'\n\nconst Default = {\n  offset: 10,\n  method: 'auto',\n  target: ''\n}\n\nconst DefaultType = {\n  offset: 'number',\n  method: 'string',\n  target: '(string|element)'\n}\n\n/**\n * Class definition\n */\n\nclass ScrollSpy extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n    this._scrollElement = this._element.tagName === 'BODY' ? window : this._element\n    this._offsets = []\n    this._targets = []\n    this._activeTarget = null\n    this._scrollHeight = 0\n\n    EventHandler.on(this._scrollElement, EVENT_SCROLL, () => this._process())\n\n    this.refresh()\n    this._process()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  refresh() {\n    this._offsets = []\n    this._targets = []\n    this._scrollHeight = this._getScrollHeight()\n\n    const autoMethod = this._scrollElement === this._scrollElement.window ? METHOD_OFFSET : METHOD_POSITION\n    const offsetMethod = this._config.method === 'auto' ? autoMethod : this._config.method\n    const offsetBase = offsetMethod === METHOD_POSITION ? this._getScrollTop() : 0\n    const targets = SelectorEngine.find(SELECTOR_LINK_ITEMS, this._config.target)\n      .map(element => {\n        const targetSelector = getSelectorFromElement(element)\n        const target = targetSelector ? SelectorEngine.findOne(targetSelector) : null\n\n        if (!target) {\n          return null\n        }\n\n        const targetBCR = target.getBoundingClientRect()\n\n        return targetBCR.width || targetBCR.height ?\n          [Manipulator[offsetMethod](target).top + offsetBase, targetSelector] :\n          null\n      })\n        .filter(Boolean)\n        .sort((a, b) => a[0] - b[0])\n\n    for (const target of targets) {\n      this._offsets.push(target[0])\n      this._targets.push(target[1])\n    }\n  }\n\n  dispose() {\n    EventHandler.off(this._scrollElement, EVENT_KEY)\n    super.dispose()\n  }\n\n  // Private\n\n  _configAfterMerge(config) {\n    config.target = getElement(config.target) || document.documentElement\n\n    return config\n  }\n\n  _getScrollTop() {\n    return this._scrollElement === window ?\n      this._scrollElement.pageYOffset :\n      this._scrollElement.scrollTop\n  }\n\n  _getScrollHeight() {\n    return this._scrollElement.scrollHeight || Math.max(\n      document.body.scrollHeight,\n      document.documentElement.scrollHeight\n    )\n  }\n\n  _getOffsetHeight() {\n    return this._scrollElement === window ?\n      window.innerHeight :\n      this._scrollElement.getBoundingClientRect().height\n  }\n\n  _process() {\n    const scrollTop = this._getScrollTop() + this._config.offset\n    const scrollHeight = this._getScrollHeight()\n    const maxScroll = this._config.offset + scrollHeight - this._getOffsetHeight()\n\n    if (this._scrollHeight !== scrollHeight) {\n      this.refresh()\n    }\n\n    if (scrollTop >= maxScroll) {\n      const target = this._targets[this._targets.length - 1]\n\n      if (this._activeTarget !== target) {\n        this._activate(target)\n      }\n\n      return\n    }\n\n    if (this._activeTarget && scrollTop < this._offsets[0] && this._offsets[0] > 0) {\n      this._activeTarget = null\n      this._clear()\n      return\n    }\n\n    for (const i of this._offsets.keys()) {\n      const isActiveTarget = this._activeTarget !== this._targets[i] &&\n          scrollTop >= this._offsets[i] &&\n          (typeof this._offsets[i + 1] === 'undefined' || scrollTop < this._offsets[i + 1])\n\n      if (isActiveTarget) {\n        this._activate(this._targets[i])\n      }\n    }\n  }\n\n  _activate(target) {\n    this._activeTarget = target\n\n    this._clear()\n\n    const queries = SELECTOR_LINK_ITEMS.split(',')\n      .map(selector => `${selector}[data-bs-target=\"${target}\"],${selector}[href=\"${target}\"]`)\n\n    const link = SelectorEngine.findOne(queries.join(','), this._config.target)\n\n    link.classList.add(CLASS_NAME_ACTIVE)\n    if (link.classList.contains(CLASS_NAME_DROPDOWN_ITEM)) {\n      SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE, link.closest(SELECTOR_DROPDOWN))\n        .classList.add(CLASS_NAME_ACTIVE)\n    } else {\n      for (const listGroup of SelectorEngine.parents(link, SELECTOR_NAV_LIST_GROUP)) {\n        // Set triggered links parents as active\n        // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor\n        for (const item of SelectorEngine.prev(listGroup, `${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`)) {\n          item.classList.add(CLASS_NAME_ACTIVE)\n        }\n\n        // Handle special case when .nav-link is inside .nav-item\n        for (const navItem of SelectorEngine.prev(listGroup, SELECTOR_NAV_ITEMS)) {\n          for (const item of SelectorEngine.children(navItem, SELECTOR_NAV_LINKS)) {\n            item.classList.add(CLASS_NAME_ACTIVE)\n          }\n        }\n      }\n    }\n\n    EventHandler.trigger(this._scrollElement, EVENT_ACTIVATE, {\n      relatedTarget: target\n    })\n  }\n\n  _clear() {\n    const activeNodes = SelectorEngine.find(SELECTOR_LINK_ITEMS, this._config.target)\n      .filter(node => node.classList.contains(CLASS_NAME_ACTIVE))\n\n    for (const node of activeNodes) {\n      node.classList.remove(CLASS_NAME_ACTIVE)\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = ScrollSpy.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const spy of SelectorEngine.find(SELECTOR_DATA_SPY)) {\n    new ScrollSpy(spy) // eslint-disable-line no-new\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(ScrollSpy)\n\nexport default ScrollSpy\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","EVENT_ACTIVATE","EVENT_SCROLL","EVENT_LOAD_DATA_API","CLASS_NAME_DROPDOWN_ITEM","CLASS_NAME_ACTIVE","SELECTOR_DATA_SPY","SELECTOR_NAV_LIST_GROUP","SELECTOR_NAV_LINKS","SELECTOR_NAV_ITEMS","SELECTOR_LIST_ITEMS","SELECTOR_LINK_ITEMS","SELECTOR_DROPDOWN","SELECTOR_DROPDOWN_TOGGLE","METHOD_OFFSET","METHOD_POSITION","Default","offset","method","target","DefaultType","ScrollSpy","BaseComponent","constructor","element","config","_scrollElement","_element","tagName","window","_offsets","_targets","_activeTarget","_scrollHeight","EventHandler","on","_process","refresh","_getScrollHeight","autoMethod","offsetMethod","_config","offsetBase","_getScrollTop","targets","SelectorEngine","find","map","targetSelector","getSelectorFromElement","findOne","targetBCR","getBoundingClientRect","width","height","Manipulator","top","filter","Boolean","sort","a","b","push","dispose","off","_configAfterMerge","getElement","document","documentElement","pageYOffset","scrollTop","scrollHeight","Math","max","body","_getOffsetHeight","innerHeight","maxScroll","length","_activate","_clear","i","keys","isActiveTarget","queries","split","selector","link","join","classList","add","contains","closest","listGroup","parents","item","prev","navItem","children","trigger","relatedTarget","activeNodes","node","remove","jQueryInterface","each","data","getOrCreateInstance","TypeError","spy","defineJQueryPlugin"],"mappings":"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"}